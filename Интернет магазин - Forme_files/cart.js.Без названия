!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(1),i=o(r),u="/create=",a="";new i.default(window.Ecwid,u,a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(2),a=o(u),s=n(3),c=o(s),l=n(4),d=o(l),f="shop-at-app-loading-style",h="shop-at-app-checkout-loading-style",_="CART",p=function(){function e(t,n,o){return r(this,e),t?(this._ecwid=t,void(this._parseRequest(n)&&(o&&xAffiliate(o),this._indicator=new a.default(this._gotoCheckout?h:f),this._restoreCart()))):void console.log("ecwid module not found, skip loading")}return i(e,[{key:"_parseRequest",value:function(e){if(this._plainRequest=new c.default(e,window.location.hash,window.location.pathname),this._plainRequest.hasBody)return this._request=d.default.decode(this._plainRequest.body),this._productsArray=this._request&&this._request.products,this._productsArray&&Array.isArray(this._productsArray)&&0!==this._productsArray.length?(this._gotoCheckout=this._request.gotoCheckout===!0,this._profile=this._request.profile,!0):void console.log("incorrect object passed "+this._plainRequest.body)}},{key:"_restoreCart",value:function(){var e=this;this._indicator.show(),this._ecwid.OnAPILoaded.add(function(){e._tryExecuteRequest()}),this._ecwid.OnPageLoaded.add(function(t){t.type===_&&e._indicator.scheduleFallbackHide()})}},{key:"_applyProfile",value:function(){this._profile&&(this._profile.address&&this._ecwid.Cart.setAddress(this._profile.address,function(){return console.log("address applied")},function(e,t){return console.error(e+t)}),this._profile.billingAddress&&this._ecwid.Cart.setBillingAddress(this._profile.billingAddress,function(){return console.log("billing address applied")},function(e,t){return console.error(e+t)}),this._profile.email&&this._ecwid.Cart.setCustomerEmail(this._profile.email,function(){return console.log("email applied")},function(e,t){return console.error(e+t)}),this._profile.orderComments&&this._ecwid.Cart.setOrderComments(this._profile.orderComments,function(){return console.log("order comments applied")},function(e,t){return console.error(e+t)}))}},{key:"_tryExecuteRequest",value:function(){var e=this;this._ecwid.Cart.clear(),this._applyProfile();var t=0;this._productsArray.forEach(function(n){n.callback=function(o,r){var i="adding "+(r?r.name:JSON.stringify(n))+"  "+o;o?console.log(i):console.error(i),t+=1,e._isAllProductsAdded(t)&&e._onAllProductsAdded()},e._ecwid.Cart.addProduct(n)}),this._cleanHistory(this._plainRequest.hashPrefix)}},{key:"_isAllProductsAdded",value:function(e){return e===this._productsArray.length}},{key:"_onAllProductsAdded",value:function(){var e=this;this._gotoCheckout&&this._ecwid.Cart.canGotoCheckout()?(this._ecwid.OnPageLoaded.add(function(t){t.type!==_&&e._indicator.hide()}),this._ecwid.Cart.gotoCheckout(function(){return e._indicator.scheduleDelayedHide()})):this._indicator.scheduleHide()}},{key:"_cleanHistory",value:function(e){window.history.replaceState(null,null,e),this._ecwid.customHistoryStateHandler&&this._ecwid.customHistoryStateHandler(window.location.hash)}}]),e}();t.default=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=500,i=2e3,u=12e3,a=function(){function e(t){n(this,e),this._loadingStyle=t,this._rootElement=document.body}return o(e,[{key:"show",value:function(){this._rootElement.classList.add(this._loadingStyle)}},{key:"hide",value:function(){this._rootElement.classList.remove(this._loadingStyle)}},{key:"_scheduleHide",value:function(e){var t=this;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){return t.hide()},e)}):setTimeout(function(){return t.hide()},e)}},{key:"scheduleHide",value:function(){this._scheduleHide(r)}},{key:"scheduleDelayedHide",value:function(){this._scheduleHide(i)}},{key:"scheduleFallbackHide",value:function(){this._scheduleHide(u)}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r="#!/~/cart",i="!/~/cart",u=function(){function e(t,o,u){n(this,e);var a=r+t;if(!o||o.length<=a.length){a=i+t;var s=u.indexOf(a);if(!u||s===-1)return;this.setCommandBody(a,u.substring(s))}else this.setCommandBody(a,o)}return o(e,[{key:"setCommandBody",value:function(e,t){var n=t.indexOf(e);0===n&&(this._commandBody=t.substring(e.length))}},{key:"hashPrefix",get:function(){return r}},{key:"hasBody",get:function(){return!!this._commandBody}},{key:"body",get:function(){return this._commandBody}}]),e}();t.default=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(5),a=o(u),s=function(){function e(){r(this,e)}return i(e,null,[{key:"decode",value:function(e){var t=decodeURIComponent(e);try{var n=this._unescapeNonAsciiSymbols(atob(t));return a.default.parse(n)}catch(e){return console.log("Cart creation link is not in base64. Trying to parse just decoded link"),a.default.parse(t)}}},{key:"_unescapeNonAsciiSymbols",value:function(e){return decodeURIComponent(e)}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e)}return o(e,null,[{key:"parse",value:function(e){try{return JSON.parse(e)}catch(t){console.error("Json parsing error",e,t)}}}]),e}();t.default=r}]);
//# sourceMappingURL=ecwidbundle.js.map